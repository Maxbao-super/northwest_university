# 应用层(Application Layer)

![应用层导图](img\应用层导图.jpeg)

## 概述

应用层对应用程序的通信提供服务

#### 功能

* 文件传输、访问和管理
* 电子邮件
* 虚拟终端
* 查询服务和远程作业登录

#### 协议

* FTP
* SMTP，POP3
* HTTP
* DNS

#### 应用模式

**C/S模型**

服务器：提供计算服务的设备

1. 永久提供服务
2. 永久性访问地址/域名

客户机：请求计算服务的主机

1. 与服务器通信,使用服务器提供的服务
2. 间歇性接入网络
3. 可能使用动态IP地址
4. 不与其他客户机直接通信

应用: Web,文件传输FTP,远程登录,电子邮件

**P2P模型**

* 不存在永远在线的服务器
* 每个主机既可以提供服务,也可以请求服务
* 任意端系统/节点之间可以直接通讯
* 节点间歇性接入网络节点可能改变IP地址
* 可扩展性好
* 网络健壮性强

## 域名解析系统DNS

> 将域名解析为IP地址

域名格式：www.baidu.com

* 三级域名：www
* 二级域名：baidu
* 顶级域名：com

顶级域名：

* 国家顶级域名：cn,us,uk
* 通用顶级域名：com,net,org,gov,int,aero,museum,travel
* 基础结构域名/反向域名：arpa

二级域名：

* 类别域名：ac,com,edu,gov,mil,net,org
* 行政区域名

![](img\域名.png)

#### 域名服务器

本地域名服务器：当一个主机发出DNS查询请求时，这个查询请求报文就发送给本机域名服务器

权限域名服务器：负责一个区的域名服务器

顶级域名服务器：管理该顶级域名服务器注册的所有二级域名

#### 域名解析过程

递归查询

![](img\域名递归查询.png)

迭代查询

![](img\递归迭代查询.png)

## 文件传输协议FTP---21

> 提供不同种类主机系统之间的的文件传输能力

FTP是基于客户/服务器（C/S）的协议。
用户通过一个客户机程序连接至在远程计算机上运行的服务器程序。
依照FTP协议提供服务,进行文件传送的计算机就是FTP服务器。
连接FTP服务器，遵循FTP协议与服务器传送文件的电脑就是FTP客户端。

#### 工作原理

1. 在地址框中输入ftp地址以及用户名密码，或匿名登陆

互连网中有很大一部分FTP服务器被称为"匿名” (Anonymous) FTP服务器。
这类服务器的目的是向公众提供文件拷贝服务,不要求用户事先在该服务器进行登记注册,也不用取得FTP服务器的授权。
Anonymous (匿名文件传输)能够使用户与远程主机建立连接并以匿名身份从远程主机上拷贝文件,而不必是该远程主机的注册用户。
用户使用特殊的用户名"anonymous"登陆FTP服务,就可访问远程主机上公开的文件。

**FTP使用TCP实现可靠传输**

![](img\FTP原理.png)

传输模式：

* 文本模式：ASCII模式，以文本序列传输数据
* 二进制模式：Binary模式，以二进制序列传输数据

## 电子邮件SMTP---25

### 概述

电子邮件，使用电子设备交换的邮件及方法

优点：使用方便，传递迅速，费用低廉，可以传送多种类型信息

重要标准：

* 简单邮件发送协议SMTP
* 互联网文本报文格式
* 通用互联网邮件扩充MIME

构成：用户代理，邮件服务器以及邮件发送和读取协议

* 用户与电子邮件系统的接口：电子邮件客户端软件（撰写，显示，处理，通信）
* 邮件服务器：邮件传输代理。发送和接收邮件，同时向发信人报告邮件发送情况，按客户服务器方式工作
* 邮件发送和读取协议：
  * SMTP：用汉语用户代理向邮件服务器或邮件服务器之间发送邮件
  * POP3：用于用户代理从邮件服务器读取邮件
* 邮件服务器必须能够同时充当客户和服务器，SMTP和POP3都使用TCP可靠连接

### 协议

#### POP3---110

邮局协议第三版本

#### 网际报文存取协议IMAP

特点

* 连接后只下载邮件首部
* 用户直接在IMAP服务器上创建和管理文件夹
* 用户可以搜索邮件内容
* 用户在不同地方使用不同计算机随上上网阅读和处理自己的邮件
* 允许收信人只读取邮件中某一部分

缺点：查阅邮件必须联网



#### 基于万维网的邮件

缺点：

* 用户代理
* 必须在计算机中按照用户代理软件
* 收发邮件不方便

优点：

#### 通用因特网邮件扩充MIME

![](img\MIME.png)



## 万维网

万维网WWW是一个大规模的、联机式的信息储藏所（资料空间），无数个网络站点和网页的集合。

统一资源定位符URL---->资源（文字、视频、音频）

用户通过点击超链接获取资源，资源通过超文本传输协议HTTP传送给使用者

> 万维网以CS方式工作，用户使用浏览器就是万维网客户程序，万维网文档所驻留的主机运行服务器程序
>
> 万维网使用超文本标记语言HTML，使得万维网页面设计者可以方便地从一个界面的连接跳转到另一个界面，并能够在自己的屏幕上显示出来

## HTTP

HTTP定义了浏览器怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器

![](img\HTTP.png)

特点：

* 无状态的
* 使用cookie存放数据，cookie存储在用户主机中的文本文件，记录一段时间内用户的访问记录，提供个性化服务
* HTTP采用TCP协议作为运输层协议，但HTTP本身无连接

### 连接方式

非持久连接：

![](img\HTTP非持久.png)

持久连接：

![](img\HTTP持久.png)

### 报文结构

HTTP报文分为请求报文和响应报文，且面向文本，因此报文中每个字段都是ASCII码串

![](img\HTTP报文.png)

>GET /index.html HTTP/1.1
>Host: www.test.edu.cn2
>Connection: Close
>Cookie: 123456

### 状态码

| 状态码 | 意义                                           |
| ------ | ---------------------------------------------- |
| 1xx    | 表示通知信息的,如请求收到了或正在处理          |
| 2xx    | 表示成功,如接受或知道了                        |
| 3xx    | 表示重定向,如要完成请求还必须采取进一步的行动  |
| 4xx    | 表示客户的差错，如请求中有错误的语法或不能完成 |
| 5xx    | 表示服务器的差错，如服务器失效无法完成请求     |



## 网络管理





## 网络安全

### 安全性威胁

#### 被动攻击-加密技术

截获

* 攻击者从网络窃听他人内容

流量分析

* 攻击这只观察和分析某一协议数据单元PDU，以便了解所交换数据的性质，但不干扰信息流

#### 主动攻击-加密+鉴别

篡改：故意篡改网络上的报文

恶意程序：计算机病毒、计算机蠕虫。特洛伊木马，逻辑炸弹，后门入侵，流氓软件等

拒绝服务DoS：攻击者向互联网某个服务器发送大量分组，使服务器无法提供正常服务，甚至瘫痪

计算机网络通信安全目标：

* 防止分析出报文内容和流量分析
* 防止恶意程序
* 检测更改报文流

安全目标：

* 保密性
* 端点鉴别
* 信息的完整性
* 运行的安全性
